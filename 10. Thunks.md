# Async redux data flow

- In a typical real world application, we never store data only on client layer. We have to communicate with our backend system to read and write data.
- To perform async tasks we use `thunks` which is a middleware.


## Async data flow

- User will interact with the application.
- From event handlers we would now dispatch a `thunk` instead of `actions`.
- This `thunk` will go to a middleware instead of going directly to `store`.
- The middleware performs async task and once the tak is completed, it dispatches an `action` with the data to the store.
- Store then runs the reducer function and updates it's state with the value returned by reducer.
- All the components that are listening to store update receives a notification about state change.


## Data fetching logic pattern

- Before the request, an action is automatically dispatched to store. This is used to know if a request is in progress or not to handle potential loading state or avoid making duplicate calls.
- Actual call happens which will eventually resolve or get rejected.
- Again automatically, actions are dispatched to the store for both success and error cases which will be then handled by a reducer and state of store will be updated.


## createAsyncThunk

```ts
import { createAsyncThunk } from '@reduxjs/toolkit'

export const fetchItemById = createAsyncThunk(
  'items/fetchItemById',
  async (itemId: string) => {
    const item = await someHttpRequest(itemId)
    return item
  }
)
```

- `createAsyncThunk` accepts a name and a function which has async logic.
- It returns an action creator.


## Typing Redux Thunks


📁 src/app/withTypes
