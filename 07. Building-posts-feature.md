# Main Posts Feed


üìÅ src/app/features/posts/postsSlice.ts

## 1. Define the structure of your feature

```ts
export interface IPost {
  id: string
  title: string
  content: string
}
```

## 2. Define the initial value that this feature will have.

```ts
const initialState: IPost[] = [
  { id: '1', title: 'First Post!', content: 'Hello!' },
  { id: '2', title: 'Second Post', content: 'More text' },
]
```

## 3. Create a slice

```ts
import { createSlice } from '@reduxjs/toolkit'

export const postsSlice = createSlice({
  name: 'posts',
  initialState,
  reducers: {},
})
```

## 4. Export action creators and reducer

```ts
export const {} = postsSlice.actions

export default postsSlice.reducer
```

## 5. Define selector functions

```ts
export function selectPosts(state: RootState) {
  return state.posts
}
```

## 6. Add slice's reducer function to store

```ts
import PostsReducer from '@/features/posts/postsSlice'

export const store = configureStore({
  reducer: {
    posts: PostsReducer,
  },
})
```
- This tells redux that our state object has a property `posts` and that it's data will be managed by `PostsReducer` when any action is dispatched.



## Showing the Posts List

- Now that we have posts data in our store, we can create a component to render posts.
- All posts related features or components will be written inside `posts` folder.
- To render posts, we need to read data from the store. A component can read data from store using `useSelector` hook. The selector function gets automatically called with entire root state as argumeent and it returns the value it needs to read.


üìÅ src/app/features/posts/PostsList.tsx

```tsx
import { useAppSelector } from '@/app/hooks'
import { selectPosts } from './postsSlice'
import PostItem from './PostItem'

export default function PostsList() {
  const posts = useAppSelector(selectPosts)

  const renderedPosts = posts.map((post) => <PostItem key={post.id} post={post} />)

  return (
    <section className="posts-list">
      <h2>Posts</h2>
      {renderedPosts}
    </section>
  )
}

```


## Adding New Posts

- Create a new component `üìÅ src/app/features/posts/AddPostForm.tsx` which will render a form to add a new post.


## Saving Post Entries

- All the logic to update posts data resides in `postsSlice`.
- We need to create an `action` creator and a `reducer` function that will handle the action.
- When we create a reducer function, `createSlice` automatically creates an action creator function for us which we can use to dispatch action objects.

```ts
export const postsSlice = createSlice({
  name: 'posts',
  initialState,
  reducers: {
    postAdded(state, action: PayloadAction<IPost>) {
      state.push(action.payload)
    },
  },
})

export const { postAdded } = postsSlice.actions
```
